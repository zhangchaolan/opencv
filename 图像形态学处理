import cv2 as cv
import numpy as np
import matplotlib.pyplot as plt 
image=cv.imread("C:/111/bihe.png",cv.IMREAD_ANYCOLOR)
#腐蚀，消除边界点
k=np.ones((10,10),np.uint8)#构建3*3矩形结构元
img=cv.erode(image,k,iterations=3)#迭代三次,
dilate_n=cv.dilate(img,k,iterations=3)#先腐蚀后膨胀迭代三次
opening=cv.morphologyEx(image,cv.MORPH_OPEN,k)
cv.imshow("image",image)
cv.imshow("opening",opening)
cv.imshow("erode",img)
cv.imshow("dilate_n",dilate_n)
cv.waitKey()
cv.destroyAllWindows()
#膨胀，边界点的扩张
k=np.ones((3,3),np.uint8)
img=cv.dilate(image,k,iterations=10)
cv.imshow("image",image)
cv.imshow("img",img)
cv.waitKey()
cv.destroyAllWindows()
#梯度运算 膨胀的结果减去腐蚀的结果获取图像边缘信息
k=np.ones((5,5),np.uint8)
r1=cv.morphologyEx(image,cv.MORPH_GRADIENT,k)
cv.imshow("image",image)
cv.imshow("r1",r1)
cv.waitKey()
cv.destroyAllWindows()
#开运算，先腐蚀后膨胀,没有迭代次数一说
k=np.ones((5,5),np.uint8)
opening=cv.morphologyEx(image,cv.MORPH_OPEN,k)
cv.imshow("image",image)
cv.imshow("ropening",opening)
cv.waitKey()
cv.destroyAllWindows()
#闭运算，先膨胀后腐蚀,填充物体内黑洞
k=np.ones((10,10),np.uint8)
closing=cv.morphologyEx(image,cv.MORPH_CLOSE,k)
cv.imshow("image",image)
cv.imshow("closing",closing)
cv.waitKey()
cv.destroyAllWindows()
#黑帽运算(获取图像边缘更加黑暗的部分或图像内小孔)
k=np.ones((10,10),np.uint8)
blackhat=cv.morphologyEx(image,cv.MORPH_BLACKHAT,k)
cv.imshow("image",image)
cv.imshow("blackhat",blackhat)
cv.waitKey()
cv.destroyAllWindows()
#礼帽运算（获取噪声或提取边缘更亮部分）
k=np.ones((10,10),np.uint8)
tophat=cv.morphologyEx(image,cv.MORPH_TOPHAT,k)
blackhat=cv.morphologyEx(image,cv.MORPH_BLACKHAT,k)
cv.imshow("blackhat",blackhat)
cv.imshow("image",image)
cv.imshow("tophat",tophat)
cv.waitKey()
cv.destroyAllWindows()
